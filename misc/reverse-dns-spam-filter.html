<!DOCTYPE html>
<html lang="en">
  <head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width">
    <title>Reverse DNS as a spam filter</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Cabin:400,700">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-61297334-1', 'auto');
        ga('send', 'pageview');

    </script>

    <link rel="stylesheet" href="/style.css">

    

    

    
  </head>
  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Georg Nebehay</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="/code/">Code</a></li>
            <li><a href="/publications/">Publications</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <!-- <header class="header">
      <h1>Georg Nebehay</h1>
      <a href="https://twitter.com/gnebehay" target="_blank"><img src="/img/Twitter_logo_blue.png" alt="Follow me on twitter" width="46"></a>
      <a href="https://github.com/gnebehay" target="_blank"><img src="/img/Octocat.png" width="46" alt="View my GitHub page"></a>
      <script>insert_mail_address();</script>
    <noscript>Sorry, you need Javascript on to email me.</noscript>
    </header>

    <div class="navigation">
        <a href="/" class="menuitem">Home</a><a
            href="/code/" class="menuitem">Code</a><a
            href="/publications/" class="menuitem">Publications</a><a
            href="/blog/" class="menuitem">Blog</a>
    </div> -->

    <div class="container">

        

        
        <h1>Reverse DNS as a spam filter</h1>
        

        
        <span class='date'>2018-03-17</span>
        

        <p>One of the most important spam filters in use nowadays involves reverse DNS lookup.
Let us see why this is important by pretending we have a server on the domain example.com
running on the IP address A.B.C.D. and we want to send a mail from there to a @gmail.com address.
This is what happens.</p>
<ul>
<li>The SMTP server at example.com opens a connection to the gmail SMTP server.</li>
<li>The gmail server should be very suspicious of course because anyone can open a connection, so it would like to filter emails sent from random servers on the internet.</li>
<li>One assumption here is apparently that if you want to send mail you should also have a DNS entry.</li>
<li>Furthermore, the mail server that the email is coming from should be the mail server for that domain.</li>
<li>So what happens it that first of all the gmail server does a reverse DNS lookup for the IP address that the connection comes from.</li>
<li>If the reverse DNS is setup properly, it should resolve to example.com.</li>
<li>Of course, when I configure reverse DNS for my server I can just type in anything, for example tralala.com</li>
<li>To complete the checking loop, a forward DNS lookup needs to be performed and that lookup should resolve back to the original IP address.</li>
</ul>
<p>For a while I was somehow stubbornly believing that the reverse DNS entry should be set in you domain provider, but in fact you have to change it in your hosting provider.</p>
<p>The lookup check works without problems for sending mail from different addresses, because the addresses themselves are never involved in the checking. Maybe there are other checks that do that (e.g. SPF?), but for sure it is not part of the reverse DNS check.</p>

        


        

        <div id='disqus_thread'> <!--style='margin:50px; margin-top: 25px; padding-top: 25px; border-top: 1px solid black'-->
            <script>
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'gnebehay'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
            </script>
            <noscript>
                Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a>
                <a class='a.dsq-brlink' href='http://disqus.com'><span class='logo-disqus'>Disqus</span></a>
            </noscript>
        </div>

        <div id=#fb-root></div>
        <script>
            (function(d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) return;
                js = d.createElement(s); js.id = id;
                js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));
        </script>

        

    </div>

  </body>
</html>